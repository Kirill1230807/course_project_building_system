{% extends "core/layout.html" %}
{% load static %}
{% block title %}Склад бригад на об’єкті{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'pages/reports/brigade_staff.css' %}">
{% endblock %}

{% block content %}

<div class="report-container">

    <h1 class="page-title">Звіт: Склад бригад на об’єкті</h1>

    <form method="get" class="filter-form">
        <label>Об’єкт:</label>
        <select name="site_id">
            <option value="">-- Оберіть об’єкт --</option>
            {% for s in sites %}
                <option value="{{ s.0 }}" {% if selected_site == s.0|stringformat:"s" %}selected{% endif %}>
                    {{ s.1 }}
                </option>
            {% endfor %}
        </select>

        <button type="submit" class="filter-btn">Показати</button>
    </form>

    {% if data %}
    <div class="table-wrapper">
        <table class="styled-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Бригада</th>
                    <th>ПІБ працівника</th>
                    <th>Посада</th>
                    <th>Роль у бригаді</th>
                    <th>Початок роботи</th>
                    <th>Закінчення роботи</th>
                </tr>
            </thead>

            <tbody>
                {% for row in data %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ row.brigade_name }}</td>
                    <td>{{ row.employee_full_name }}</td>
                    <td>{{ row.position_title }}</td>
                    <td>{{ row.brigade_role|default:"--" }}</td>
                    <td>{{ row.start_date|date:"Y-m-d" }}</td>
                    <td>{{ row.end_date|default:"--"|date:"Y-m-d" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <p class="no-data">Даних немає.</p>
    {% endif %}

</div>

{% endblock %}