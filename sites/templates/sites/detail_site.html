{% extends "core/layout.html" %}
{% load static %}

{% block title %}Деталі об’єкта -- {{ site.name }}{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'pages/sites/detail_site.css' %}">
{% endblock %}

{% block content %}

<h1 class="page-title">Будівельний об’єкт: {{ site.name }}</h1>

<div class="back-btn-wrapper">
    <a href="{% url 'sites:index' %}" class="btn-back">Назад до списку</a>
</div>

<div class="card">
    <h2 class="section-title">Основна інформація</h2>

    <table class="detail-table">
        <tr>
            <th>Адреса</th>
            <td>{{ site.address }}</td>
        </tr>
        <tr>
            <th>Дата початку</th>
            <td>{{ site.start_date|date:"d.m.Y" }}</td>
        </tr>
        <tr>
            <th>Дата завершення</th>
            <td>
                {% if site.end_date %}
                    {{ site.end_date|date:"d.m.Y" }}
                {% else %}
                    —
                {% endif %}
            </td>
        </tr>
        <tr>
            <th>Статус</th>
            <td>{{ site.status }}</td>
        </tr>
        <tr>
            <th>Відповідальний інженер</th>
            <td>{{ site.engineer_name|default:"—" }}</td>
        </tr>
        <tr>
            <th>Примітки</th>
            <td>{{ site.notes|default:"—" }}</td>
        </tr>
    </table>
</div>

<div class="card">
    <h2 class="section-title">Дільниці цього об’єкта</h2>

    <table class="styled-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Назва дільниці</th>
                <th>Начальник дільниці</th>
            </tr>
        </thead>
        <tbody>
        {% for section in sections %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ section.name }}</td>
                <td>{{ section.chief_name|default:"—" }}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="3" class="empty-row">Немає дільниць</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
