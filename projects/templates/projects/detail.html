
{% extends "core/layout.html" %}

{% block title %}{{ project.name }}{% endblock %}

{% block content %}
<div class="features">
    <div class="detail-container">
        <!-- Заголовок -->
        <div class="detail-header">
            <div>
                <a href="{% url 'projects:list' %}" class="btn btn-secondary" style="margin-bottom: 10px;">← Назад</a>
                <h1 class="detail-title">{{ project.name }}</h1>
            </div>
            <span class="badge badge-{{ project.status }}" style="font-size: 1rem; padding: 10px 20px;">
                {% if project.status == 'planned' %}Запланований
                {% elif project.status == 'in_progress' %}В роботі
                {% elif project.status == 'suspended' %}Призупинений
                {% elif project.status == 'completed' %}Завершений
                {% endif %}
            </span>
        </div>

        <!-- Основна інформація -->
        <div class="detail-section">
            <h2 class="section-title">📋 Основна інформація</h2>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-item-label">Тип об'єкта</span>
                    <span class="info-item-value">
                        {% if project.object_type == 'residential' %}🏠 Житловий будинок
                        {% elif project.object_type == 'hospital' %}🏥 Лікарня
                        {% elif project.object_type == 'school' %}🏫 Школа
                        {% elif project.object_type == 'bridge' %}🌉 Міст
                        {% elif project.object_type == 'road' %}🛣️ Дорога
                        {% else %}🏢 Інше
                        {% endif %}
                    </span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Адреса</span>
                    <span class="info-item-value">{{ project.address }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Клієнт</span>
                    <span class="info-item-value">{{ project.client_name }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Телефон клієнта</span>
                    <span class="info-item-value">{{ project.client_phone|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Менеджер проєкту</span>
                    <span class="info-item-value">{{ project.manager_name|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Номер контракту</span>
                    <span class="info-item-value">{{ project.contract_number|default:"—" }}</span>
                </div>
            </div>
        </div>

        <!-- Терміни -->
        <div class="detail-section">
            <h2 class="section-title">📅 Терміни виконання</h2>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-item-label">Дата контракту</span>
                    <span class="info-item-value">{{ project.contract_date|date:"d.m.Y"|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Плановий початок</span>
                    <span class="info-item-value">{{ project.planned_start_date|date:"d.m.Y"|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Планове завершення</span>
                    <span class="info-item-value">{{ project.planned_end_date|date:"d.m.Y"|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Фактичний початок</span>
                    <span class="info-item-value">{{ project.actual_start_date|date:"d.m.Y"|default:"—" }}</span>
                </div>
                <div class="info-item">
                    <span class="info-item-label">Фактичне завершення</span>
                    <span class="info-item-value">{{ project.actual_end_date|date:"d.m.Y"|default:"—" }}</span>
                </div>
            </div>
        </div>

        <!-- Фінанси -->
        {% if finances %}
        <div class="detail-section">
            <h2 class="section-title">💰 Фінансова інформація</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon blue">💼</div>
                    <div class="stat-content">
                        <div class="stat-label">Сума контракту</div>
                        <div class="stat-value">{{ finances.contract_amount|floatformat:0 }}</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon green">📈</div>
                    <div class="stat-content">
                        <div class="stat-label">Надходження</div>
                        <div class="stat-value">{{ finances.total_income|floatformat:0 }}</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon orange">📉</div>
                    <div class="stat-content">
                        <div class="stat-label">Витрати</div>
                        <div class="stat-value">{{ finances.total_expenses|floatformat:0 }}</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon purple">💎</div>
                    <div class="stat-content">
                        <div class="stat-label">Прибуток</div>
                        <div class="stat-value">{{ finances.profit|floatformat:0 }}</div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}