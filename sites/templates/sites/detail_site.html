{% extends "core/layout.html" %}
{% load static %}

{% block title %}Деталі об’єкта -- {{ site.name }}{% endblock %}

{% block content %}
    <h1>Будівельний об’єкт: {{ site.name }}</h1>
    <div class="back-btn-wrapper">
        <a href="{% url 'sites:index' %}" class="btn-back">Назад до списку</a>
    </div>
    <table border="1" cellpadding="6">
        <tr>
            <th>Адреса</th>
            <td>{{ site.address }}</td>
        </tr>
        <tr>
            <th>Дата початку</th>
            <td>{{ site.start_date|date:"d.m.Y" }}</td>
        </tr>
        <tr>
            <th>Дата завершення</th>
            <td>{% if site.end_date %}{{ site.end_date|date:"d.m.Y" }}{% else %}—{% endif %}</td>
        </tr>
        <tr>
            <th>Статус</th>
            <td>{{ site.status }}</td>
        </tr>
        <tr>
            <th>Відповідальний інженер</th>
            <td>{% if site.engineer_name %}{{ site.engineer_name }}{% else %}—{% endif %}</td>
        </tr>
        <tr>
            <th>Примітки</th>
            <td>{% if site.notes %}{{ site.notes }}{% else %}—{% endif %}</td>
        </tr>
    </table>

    <h3>Дільниці цього об’єкта</h3>
    <table border="1" cellpadding="3">
        <tr>
            <th>ID</th>
            <th>Назва дільниці</th>
            <th>Начальник дільниці</th>
        </tr>
        {% for section in sections %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ section.name }}</td>
                <td>{% if section.chief_name %}{{ section.chief_name }}{% else %}—{% endif %}</td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="4" style="text-align:center;">Немає дільниць</td>
            </tr>
        {% endfor %}
    </table>

    <link rel="stylesheet" href="{% static 'sites/css/sites.css' %}">
{% endblock %}
