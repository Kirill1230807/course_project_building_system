{% extends "core/layout.html" %}
{% load static %}
{% block title %}Звіт: Роботи з перевищенням термінів{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'pages/reports/delayed_works.css' %}">
{% endblock %}

{% block content %}

<div class="report-container">

    <h1 class="page-title">Звіт: Роботи з перевищенням термінів</h1>

    <p class="report-description">
        Відображаються роботи, у яких фактична дата завершення пізніше за планову.
    </p>

    {% if data %}
    <div class="table-wrapper">
        <table class="styled-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Об’єкт</th>
                    <th>Дільниця</th>
                    <th>Вид робіт</th>
                    <th>План. початок</th>
                    <th>План. завершення</th>
                    <th>Факт. початок</th>
                    <th>Факт. завершення</th>
                    <th>Затримка (днів)</th>
                </tr>
            </thead>

            <tbody>
                {% for row in data %}
                <tr class="delayed-row">
                    <td>{{ forloop.counter }}</td>
                    <td>{{ row.site_name }}</td>
                    <td>{{ row.section_name }}</td>
                    <td>{{ row.work_name }}</td>
                    <td>{{ row.planned_start|date:"Y-m-d" }}</td>
                    <td>{{ row.planned_end|date:"Y-m-d" }}</td>
                    <td>{{ row.actual_start|date:"Y-m-d" }}</td>
                    <td>{{ row.actual_end|date:"Y-m-d" }}</td>
                    <td class="delay-value">{{ row.delay_days }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <p class="no-data">Дані про затримані роботи відсутні.</p>
    {% endif %}

</div>

{% endblock %}
