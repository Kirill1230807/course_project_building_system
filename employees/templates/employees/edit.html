{% extends "core/layout.html" %}
{% load static %}
{% block title %}Редагування працівника{% endblock %}

{% block content %}
<h1>Редагування працівника</h1>

<form method="post" action="{% url 'employees:edit' employee.id %}">
  {% csrf_token %}

  <label>Ім’я:</label>
  <input type="text" name="first_name" value="{{ employee.first_name }}" required><br>

  <label>Прізвище:</label>
  <input type="text" name="last_name" value="{{ employee.last_name }}" required><br>

  <label>По-батькові:</label>
  <input type="text" name="father_name" value="{{ employee.father_name }}"><br>

  <label>Дата народження:</label>
  <input type="date" name="birthday" value="{{ employee.birthday|date:'Y-m-d' }}" required><br>

  <label>Дата прийняття на роботу:</label>
  <input type="date" name="start_date" value="{{ employee.start_date|date:'Y-m-d' }}" required><br>

  <label>Дата звільнення:</label>
  <input type="date" name="end_date" value="{{ employee.end_date|date:'Y-m-d' }}"><br>

  <label>Категорія:</label>
  <select id="categorySelect" name="category" required>
      <option value="Робітники" {% if employee.category == "Робітники" %}selected{% endif %}>Робітники</option>
      <option value="Інженерно-технічний персонал" {% if employee.category == "Інженерно-технічний персонал" %}selected{% endif %}>Інженерно-технічний персонал</option>
  </select><br>

  <label>Посада:</label>
  <select id="positionSelect" name="position_id" required>
      {% for id, title, category in positions %}
          <option value="{{ id }}" data-category="{{ category }}" {% if employee.position_id == id %}selected{% endif %}>
              {{ title }}
          </option>
      {% endfor %}
  </select><br>

  <label>Зарплата:</label>
  <input type="number" name="salary" step="0.01" value="{{ employee.salary }}" required><br>

  {% if error_msg %}
      <p class="error" style="color:red;">{{ error_msg }}</p>
  {% endif %}

  <button type="submit">Зберегти зміни</button>
</form>

<script src="{% static 'employees/js/edit_employee.js' %}"></script>
{% endblock %}